<head>
	<LINK href="css/subpages.css" rel="stylesheet" type="text/css">
	 <!-- tx eml functions -->
	<script type="text/javascript" src="js/tx_eml.js" ></script>
</head>
<body onload="javascript: onStart();">

<div class="headline">Optical TX</div>

<div name="wrap_TX_Data">
<FORM onsubmit="return false" ID="Form_PG">
	<!--Table-->
<TABLE  class="blue-select" ALIGN="left" BORDER=1 CELLSPACING=1 CELLPADDING=1 WIDTH="100%">
	<!--Row 1-->
<TR ALIGN="left" VALIGN="middle">
        <TH>All channels<br>same: <INPUT TYPE="CHECKBOX" NAME="all" ID="all" onClick="javascript:  window.parent.all_tx=this.checked; window.parent.myElement=window.parent.myVarTX0; window.parent.myCheckAll(this,'emlAmp','Amp',1);  window.parent.myElement=window.parent.myVarTX2; window.parent.myCheckAll(this,'bert0.L','.L',0);window.parent.myElement=window.parent.myVarTX; window.parent.window_onload();" VALUE ="checkbox"></TH>
	<TH>Channel 1</TH>
	<TH>Channel 2</TH>
	<TH>Channel 3</TH>
	<TH>Channel 4</TH></TR>

	
	<!--Row 2-->

	
<TR ALIGN="left" VALIGN="middle">
	<TH>ER (dB)</TH>
	<TD>
	<div class="control">
		<div class="control_elements">
			<button class="button_arrow dplus" type="button" onclick="javascript: ClickUp(1,1,10,2)"/></button>
			<button class="button_arrow dminus" type="button" onclick="javascript: ClickUp(1,2,10,2)"></button>
			
		</div>
		<div class="control_elements">
			<button class="button_arrow plus" type="button"  onclick="javascript: ClickUp(1,1,1,2)"></button>
			<button class="button_arrow minus" type="button" onclick="javascript: ClickUp(1,2,1,2)"></button>
			
		</div>	
		
		<input class="textfild" type="text" name="emlAmp1.vg1" id="emlAmp1.vg1" value="0" size=3 readonly onChange="javascript: TestVal(1); window.parent.SaveVar(this,2,'Amp',1); window.parent.myElement=window.parent.myVarTX; window.parent.window_onload();">
	</div>
	</TD>
	<TD>
	<div class="control">
		<div class="control_elements">
			<button class="button_arrow dplus" type="button" onclick="javascript: ClickUp(2,1,10,1)"></button>
			<button class="button_arrow dminus" type="button" onclick="javascript: ClickUp(2,2,10,1)"></button>
			
		</div>
		<div class="control_elements">
			<button class="button_arrow plus" type="button" onclick="javascript: ClickUp(2,1,1,1)"></button>
			<button class="button_arrow minus" type="button" onclick="javascript: ClickUp(2,2,1,1)"></button>
			
		</div>	
		
		<input class="textfild" type="text" name="emlAmp2.vg1" id="emlAmp2.vg1" value="0" size=3 readonly onChange="javascript: TestVal(2); window.parent.SaveVar(this,1,'Amp',1)">
	</div>
	</TD>
	
	<TD>
	<div class="control">
		<div class="control_elements">
			<button class="button_arrow dplus" type="button" onclick="javascript: ClickUp(3,1,10,1)"></button>
			<button class="button_arrow dminus" type="button" onclick="javascript: ClickUp(3,2,10,1)"></button>
			
		</div>
		<div class="control_elements">
			<button class="button_arrow plus" type="button" onclick="javascript: ClickUp(3,1,1,1)"></button>
			<button class="button_arrow minus" type="button" onclick="javascript: ClickUp(3,2,1,1)"></button>
			
		</div>	
		
		<input class="textfild" type="text" name="emlAmp3.vg1" id="emlAmp3.vg1" value="0" size=3 readonly onChange="javascript: TestVal(3); window.parent.SaveVar(this,1,'Amp',1)">
	</div>
	</TD>
	
	<TD>
	<div class="control">
		<div class="control_elements">
			<button class="button_arrow dplus" type="button" onclick="javascript: ClickUp(4,1,10,1)"></button>
			<button class="button_arrow dminus" type="button" onclick="javascript: ClickUp(4,2,10,1)"></button>
			
		</div>
		<div class="control_elements">
			<button class="button_arrow plus" type="button" onclick="javascript: ClickUp(4,1,1,1)"></button>
			<button class="button_arrow minus" type="button" onclick="javascript: ClickUp(4,2,1,1)"></button>
			
		</div>	
		
		<input class="textfild" type="text" name="emlAmp4.vg1" id="emlAmp4.vg1" value="0" size=3 readonly onChange="javascript: TestVal(4); window.parent.SaveVar(this,1,'Amp',1)">
	</div>
	</TD>
	
</TR>
	<!--Row 3-->

	
<TR ALIGN="left" VALIGN="middle">
	<TH>Control Loop</TH>
	<TD>
	<SELECT NAME="l0.txa_swing" ID="bert0.L0.txaSwing"  onChange="javascript: window.parent.SaveVar(this,2,'.L',0); window.parent.myElement=window.parent.myVarTX; window.parent.window_onload();" >
		<OPTION VALUE="0">OFF</OPTION>
		<OPTION VALUE ="2">ON</OPTION>
	</SELECT>
	</TD>
	
	<TD>
	<SELECT  NAME="l1.txa_swing" ID="bert0.L1.txaSwing"  onChange="javascript: window.parent.SaveVar(this,1,'.L',0);" >
		<OPTION VALUE="0">OFF</OPTION>
		<OPTION VALUE ="2">ON</OPTION>
	</SELECT>
	</TD>
	
	
	<TD>
	<SELECT  NAME="l2.txa_swing" ID="bert0.L2.txaSwing"  onChange="javascript: window.parent.SaveVar(this,1,'.L',0);" >
		<OPTION VALUE="0">OFF</OPTION>
		<OPTION VALUE ="2">ON</OPTION>
	</SELECT>
	</TD>
	<TD>
	<SELECT NAME="l3.txa_swing" ID="bert0.L3.txaSwing"  onChange="javascript: window.parent.SaveVar(this,1,'.L',0);" >
		<OPTION VALUE="0">OFF</OPTION>
		<OPTION VALUE ="2">ON</OPTION>
	</SELECT>
	</TD>
	
</TR>
	<!--Row 4-->
<TR ALIGN="left" VALIGN="middle">
	<TH>Swap P_N</TH>
	
	<TD>
	<SELECT  NAME="bert0.L0.swapTxPN" ID="bert0.L0.swapTxPN"  onChange="javascript: window.parent.SaveVar(this,2,'.L',0); window.parent.myElement=window.parent.myVarTX; window.parent.window_onload();" >
		<!-- inv. for EML vers1 only -->
		<OPTION VALUE="0">Yes</OPTION>
		<OPTION VALUE ="1">No</OPTION>
	</SELECT>
	</TD>
	
	
	<TD>
	<SELECT  NAME="bert0.L1.swapTxPN" ID="bert0.L1.swapTxPN"  onChange="javascript: window.parent.SaveVar(this,1,'.L',0);" >
	<OPTION VALUE="0">Yes</OPTION>
	<OPTION VALUE ="1">No</OPTION>
	</SELECT>
	</TD>
	
	<TD>
	<SELECT  NAME="bert0.L2.swapTxPN" ID="bert0.L2.swapTxPN"  onChange="javascript: window.parent.SaveVar(this,1,'.L',0);" >
		<OPTION VALUE="0">Yes</OPTION>
		<OPTION VALUE ="1">No</OPTION>
	</SELECT>
	</TD>
	
	<TD>
	<SELECT NAME="bert0.L3.swapTxPN" ID="bert0.L3.swapTxPN"  onChange="javascript: window.parent.SaveVar(this,1,'.L',0);" >
		<OPTION VALUE="0">Yes</OPTION>
		<OPTION VALUE ="1">No</OPTION>
	</SELECT>
	</TD>
</TR>
	
	
	
	<!--Row 5-->
<TR ALIGN="left" VALIGN="middle">
        <TH>&nbsp;&nbsp;</TH>
	<TH>&nbsp;&nbsp;</TH>
	<TH>&nbsp;&nbsp;</TH>
	<TH>&nbsp;&nbsp;</TH>
	<TH>&nbsp;&nbsp;</TH></TR>

	<!--Row 6-->
<TR ALIGN="left" VALIGN="middle">
	<TH>MZBias(V)</TH>
	
	<TD>
	<input class="textfildPattern" type="text"  id="mzMod0.modBias" value="0" size=3 readonly >
	</TD>
	
	
	<TD>
	<input class="textfildPattern" type="text"  id="mzMod1.modBias" value="0" size=3 readonly >
	</TD>
	
	<TD>
	<input class="textfildPattern" type="text"  id="mzMod2.modBias" value="0" size=3 readonly >
	</TD>
	
	<TD>
	<input class="textfildPattern" type="text"  id="mzMod3.modBias" value="0" size=3 readonly >
	</TD>
</TR>
	<!--Row 7-->
<TR ALIGN="left" VALIGN="middle">
	<TH>mzModx.ctrlDev</TH>
	
	<TD>
	<input class="textfildPattern" type="text"  id="mzMod0.ctrlDev" value="0" size=3 readonly >
	</TD>
	
	
	<TD>
	<input class="textfildPattern" type="text"  id="mzMod1.ctrlDev" value="0" size=3 readonly >
	</TD>
	
	<TD>
	<input class="textfildPattern" type="text"  id="mzMod2.ctrlDev" value="0" size=3 readonly >
	</TD>
	
	<TD>
	<input class="textfildPattern" type="text"  id="mzMod3.ctrlDev" value="0" size=3 readonly >
	</TD>
</TR>
<!--Row 8-->
<TR ALIGN="left" VALIGN="middle">
	<TH>Relative Optical<br>Power (dB)tx0.pwr</TH>
	
	<TD>
	<input class="textfildPattern" type="text"  id="tx0.pwr" value="0" size=3 readonly >
	</TD>
	
	
	<TD>
	<input class="textfildPattern" type="text"  id="tx1.pwr" value="0" size=3 readonly >
	</TD>
	
	<TD>
	<input class="textfildPattern" type="text"  id="tx2.pwr" value="0" size=3 readonly >
	</TD>
	
	<TD>
	<input class="textfildPattern" type="text"  id="tx3.pwr" value="0" size=3 readonly >
	</TD>
</TR>

<!--Row 9-->
<TR ALIGN="left" VALIGN="middle">
	<TH>Referenz Optical<br>Power (dB)tx0.pwrRef</TH>
	
	<TD>
	<input class="textfildPattern" type="text"  id="tx0.pwrRef" value="0" size=3  onkeypress='validateImput(event,this)'>
	<button class="buttonBlue" type="button" id="tx0.pwrRef_But"  onclick="javascript: TestpwrRef(this); ">Save</button>	
	</TD>
	
	
	<TD>
	<input class="textfildPattern" type="text"  id="tx1.pwrRef" value="0" size=3  onkeypress='validateImput(event,this)'>
		<button class="buttonBlue" type="button" ID="tx1.pwrRef_But"  onclick="javascript: TestpwrRef(this); ">Save</button>
	</TD>
	
	<TD>
	<input class="textfildPattern" type="text"  id="tx2.pwrRef" value="0" size=3  onkeypress='validateImput(event,this)'>
		<button class="buttonBlue" type="button" ID="tx2.pwrRef_But"  onclick="javascript: TestpwrRef(this); ">Save</button>
	</TD>
	
	<TD>
	<input class="textfildPattern" type="text"  id="tx3.pwrRef" value="0" size=3  onkeypress='validateImput(event,this)'>
		<button class="buttonBlue" type="button" ID="tx3.pwrRef_But" onclick="javascript: TestpwrRef(this); ">Save</button>
	</TD>
</TR>
</TABLE>
</FORM>

</div>
</body>
<script type="text/javascript">
	<!--
document.getElementById("tx0.pwrRef_But").style.display="none";
document.getElementById("tx1.pwrRef_But").style.display="none";
document.getElementById("tx2.pwrRef_But").style.display="none";
document.getElementById("tx3.pwrRef_But").style.display="none";	
var my_Inter, my_sek;
my_sek= 1000;
function onStart(){	
        setTimeout(StartInterval, my_sek);
	}
function StartInterval(){
		if (typeof(my_Inter)!="undefined") my_Inter=clearInterval(my_Inter);
                my_Inter=setInterval(window.parent.window_onload,my_sek);
		}
		
		
//**********************************************************
function validateImput(evt,Feld) {
	//the pressed key
	var theEvent = evt || window.event;
	var bkey = theEvent.keyCode || theEvent.which;
	key = String.fromCharCode( bkey );
	console.log("theEvent:"+theEvent+" key: "+bkey);
	
	//allow arrow keys
	if ( bkey == 39 || bkey == 37) return;
	
	//allow backspace and color save indicator red
	if (bkey == 8){
		makeSaveVisible(Feld);
		return;
	}
	
	var s=Feld.value;
	var regex = /[-.0-9]/;
	if( !regex.test(key) || s.length>=10) {
		theEvent.returnValue = false;
		if(theEvent.preventDefault) theEvent.preventDefault();
		return;
	}
	
	makeSaveVisible(Feld);
}
//**********************************************************    
function  makeSaveVisible(Feld){
	var but=(Feld.id+'_But');   
	my_Inter=clearInterval(my_Inter);	
	document.getElementById(but).style.display='table-row';	
}

function TestpwrRef(item){

var myname=item.id;
myname=myname.substr(0,10);
var elem=document.getElementById(myname);
var val=elem.value;
if (!isNumber(val) || val>10 || val<-50) {	
elem.value="";
}
else {
window.parent.SaveVar(elem,1,'.L',0);
document.getElementById("tx0.pwrRef_But").style.display="none";
document.getElementById("tx1.pwrRef_But").style.display="none";
document.getElementById("tx2.pwrRef_But").style.display="none";
document.getElementById("tx3.pwrRef_But").style.display="none";	
onStart();
}
}
function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
}
</script>