<!-- saved from url=(0022)http://internet.e-mail -->
<!DOCTYPE html>

<html>
<head>

    <title>Date Axes, Rotated Labels and Zooming</title>
    <link class="include" rel="stylesheet" type="text/css" href="../html/css/graph/jquery.jqplot.min.css" />
    <link rel="stylesheet" type="text/css" href="../html/css/graph/examples.min.css" />
    <link type="text/css" rel="stylesheet" href="../html/css/graph/shCoreDefault.min.css" />
    <link type="text/css" rel="stylesheet" href="../html/css/graph/shThemejqPlot.min.css" />
    <LINK href="../html/css/subpages.css" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]><script language="javascript" type="text/javascript" src="../html/js/graph/excanvas.js"></script><![endif]-->
    <script class="include" type="text/javascript" src="../html/js/graph/jquery.min.js"></script>


</head>
<body onload="javascript: start();">
    
<FORM>
<TABLE  class="blue-select" ALIGN="left" BORDER=1 CELLSPACING=1 CELLPADDING=1 WIDTH="100%">
	<!--Row 1-->
    <TR ALIGN="left" VALIGN="middle">  
        <TH ALIGN="middle" rowspan="2">
            <SELECT   ID="var1"  onChange="javascript: ChangeVar(1);" >
		<OPTION VALUE="mzMod0.modBias">Mod1.Bias</OPTION>
		<OPTION VALUE="mzMod1.modBias">Mod2.Bias</OPTION>
		<OPTION VALUE="mzMod2.modBias">Mod3.Bias</OPTION>
		<OPTION VALUE="mzMod3.modBias">Mod4.Bias</OPTION>
                <OPTION VALUE="tx0.pwr">Opt.Pwr1</OPTION>
                <OPTION VALUE="tx1.pwr">Opt.Pwr2</OPTION>
                <OPTION VALUE="tx2.pwr">Opt.Pwr3</OPTION>
                <OPTION VALUE="tx3.pwr">Opt.Pwr4</OPTION>
                <OPTION VALUE="mzMod0.ctrlDev">Mod1.Ctrl.Dev</OPTION>
                <OPTION VALUE="mzMod1.ctrlDev">Mod2.Ctrl.Dev</OPTION>
                <OPTION VALUE="mzMod2.ctrlDev">Mod3.Ctrl.Dev</OPTION>
                <OPTION VALUE="mzMod3.ctrlDev">Mod4.Ctrl.Dev</OPTION>
		<OPTION VALUE="system.temp">system.temp</OPTION>
                <OPTION VALUE="amp.temp">Amp.temp</OPTION>
                <OPTION VALUE="mzMod.temp">Mod.temp</OPTION>
	</SELECT>
        </TH>
        <TD>
            <div class="graphLoad">Loading</div>
            <div class="example-plot" id="chart1" style="width: 800px; height: 110px;"></div>
        </TD>
    </TR>
    
    <TR>
	<TD ALIGN="left" ><button class="buttonBlue" type="button"  onclick="javascript: GraphReset(0)">Reset</button></TD>
    </TR>
        
    <TR ALIGN="left" VALIGN="middle">     
        <TH ALIGN="middle" rowspan="2">
            <SELECT   ID="var2"  onChange="javascript: ChangeVar(2);" >
		<OPTION VALUE="mzMod0.modBias">Mod1.Bias</OPTION>
		<OPTION VALUE="mzMod1.modBias">Mod2.Bias</OPTION>
		<OPTION VALUE="mzMod2.modBias">Mod3.Bias</OPTION>
		<OPTION VALUE="mzMod3.modBias">Mod4.Bias</OPTION>
                <OPTION VALUE="tx0.pwr">Opt.Pwr1</OPTION>
                <OPTION VALUE="tx1.pwr">Opt.Pwr2</OPTION>
                <OPTION VALUE="tx2.pwr">Opt.Pwr3</OPTION>
                <OPTION VALUE="tx3.pwr">Opt.Pwr4</OPTION>
                <OPTION VALUE="mzMod0.ctrlDev">Mod1.Ctrl.Dev</OPTION>
                <OPTION VALUE="mzMod1.ctrlDev">Mod2.Ctrl.Dev</OPTION>
                <OPTION VALUE="mzMod2.ctrlDev">Mod3.Ctrl.Dev</OPTION>
                <OPTION VALUE="mzMod3.ctrlDev">Mod4.Ctrl.Dev</OPTION>
		<OPTION VALUE="system.temp">system.temp</OPTION>
                <OPTION VALUE="amp.temp">Amp.temp</OPTION>
                <OPTION VALUE="mzMod.temp">Mod.temp</OPTION>
	</SELECT>
        </TH>
        <TD>
            <div class="graphLoad">Loading</div>
            <div class="example-plot" id="chart2" style="width: 800px; height: 110px;"></div>
        </TD>
    </TR>
    
    <TR>
	<TD ALIGN="left"><button class="buttonBlue" type="button"  onclick="javascript: GraphReset(1)">Reset</button></TD>
    </TR>
    
    <TR ALIGN="left" VALIGN="middle">
        <TH ALIGN="middle" rowspan="2" >
            <SELECT   ID="var3"  onChange="javascript: ChangeVar(3);" >
		<OPTION VALUE="mzMod0.modBias">Mod1.Bias</OPTION>
		<OPTION VALUE="mzMod1.modBias">Mod2.Bias</OPTION>
		<OPTION VALUE="mzMod2.modBias">Mod3.Bias</OPTION>
		<OPTION VALUE="mzMod3.modBias">Mod4.Bias</OPTION>
                <OPTION VALUE="tx0.pwr">Opt.Pwr1</OPTION>
                <OPTION VALUE="tx1.pwr">Opt.Pwr2</OPTION>
                <OPTION VALUE="tx2.pwr">Opt.Pwr3</OPTION>
                <OPTION VALUE="tx3.pwr">Opt.Pwr4</OPTION>
                <OPTION VALUE="mzMod0.ctrlDev">Mod1.Ctrl.Dev</OPTION>
                <OPTION VALUE="mzMod1.ctrlDev">Mod2.Ctrl.Dev</OPTION>
                <OPTION VALUE="mzMod2.ctrlDev">Mod3.Ctrl.Dev</OPTION>
                <OPTION VALUE="mzMod3.ctrlDev">Mod4.Ctrl.Dev</OPTION>
		<OPTION VALUE="system.temp">system.temp</OPTION>
                <OPTION VALUE="amp.temp">Amp.temp</OPTION>
                <OPTION VALUE="mzMod.temp">Mod.temp</OPTION>
	</SELECT>
        </TH>
        <TD>
            <div class="graphLoad">Loading</div>
            <div class="example-plot" id="chart3" style="width: 800px; height: 110px;"></div>
        </TD>
    </TR>
    
    <TR>
	<TD ALIGN="left"><button class="buttonBlue" type="button"  onclick="javascript: GraphReset(2)">Reset</button></TD>
    </TR>
        
    <TR ALIGN="left" VALIGN="middle"> 
        <TH ALIGN="middle" rowspan="2" >
            <SELECT   ID="var4"  onChange="javascript: ChangeVar(4);" >
		<OPTION VALUE="mzMod0.modBias">Mod1.Bias</OPTION>
		<OPTION VALUE="mzMod1.modBias">Mod2.Bias</OPTION>
		<OPTION VALUE="mzMod2.modBias">Mod3.Bias</OPTION>
		<OPTION VALUE="mzMod3.modBias">Mod4.Bias</OPTION>
                <OPTION VALUE="tx0.pwr">Opt.Pwr1</OPTION>
                <OPTION VALUE="tx1.pwr">Opt.Pwr2</OPTION>
                <OPTION VALUE="tx2.pwr">Opt.Pwr3</OPTION>
                <OPTION VALUE="tx3.pwr">Opt.Pwr4</OPTION>
                <OPTION VALUE="mzMod0.ctrlDev">Mod1.Ctrl.Dev</OPTION>
                <OPTION VALUE="mzMod1.ctrlDev">Mod2.Ctrl.Dev</OPTION>
                <OPTION VALUE="mzMod2.ctrlDev">Mod3.Ctrl.Dev</OPTION>
                <OPTION VALUE="mzMod3.ctrlDev">Mod4.Ctrl.Dev</OPTION>
		<OPTION VALUE="system.temp">system.temp</OPTION>
                <OPTION VALUE="amp.temp">Amp.temp</OPTION>
                <OPTION VALUE="mzMod.temp">zMod.temp</OPTION>
	</SELECT>
        </TH>
        <TD>
            <div class="graphLoad">Loading</div>
            <div class="example-plot" id="chart4" style="width: 800px; height: 110px;"></div>
        </TD>
    </TR>
    
    <TR>
	<TD ALIGN="left"><button class="buttonBlue" type="button"  onclick="javascript: GraphReset(3)">Reset</button></TD>
    </TR>
    
    
    <TR>
	 <TH ALIGN="middle" rowspan="2" ></TH>
	<TD ALIGN="middle">ms: <input class="textfildPattern" type="text"  id="my_delay" value="0" size=3  onkeypress='validateImput(event,this)'>
		<button class="buttonBlue" type="button" id="my_delay_But" onclick="javascript: TestDelay(this); ">Save</button>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button class="buttonBlue" type="button"  id="StopBut" onclick="javascript: GraphStop()">Stop</button></TD>
    </TR>    
</TABLE>


    <input type="hidden"  id="mzMod0.modBias" value="0">
    <input type="hidden"  id="mzMod1.modBias" value="0">
    <input type="hidden"  id="mzMod2.modBias" value="0">
    <input type="hidden"  id="mzMod3.modBias" value="0">
 
    <input type="hidden"  id="tx0.pwr" value="0">
    <input type="hidden"  id="tx1.pwr" value="0">
    <input type="hidden"  id="tx2.pwr" value="0">
    <input type="hidden"  id="tx3.pwr" value="0">
        
    <input type="hidden"  id="mzMod0.ctrlDev" value="0">
    <input type="hidden"  id="mzMod1.ctrlDev" value="0">
    <input type="hidden"  id="mzMod2.ctrlDev" value="0">
    <input type="hidden"  id="mzMod3.ctrlDev" value="0">
   
    <input type="hidden"  id="system.temp" value="0">
    <input type="hidden"  id="amp.temp" value="0">
    <input type="hidden"  id="mzMod.temp" value="0">
</FORM>




    <script type="text/javascript" src="../html/js/graph/example.min.js"></script>

</body>

<script type="text/javascript" class="code">
<!--

var my_item1,my_item2, chart1_1,chart1_2,chart2_1,chart2_2,chart3_1,chart3_2,chart4_1,chart4_2;
var plot1,plot2,plot3,plot4;
var bStop=false;
var intervalId, my_delay=1000;
var my_var1,my_var2,my_var3,my_var4;
    my_var1='mzMod0.modBias';
    my_var2='tx0.pwr';
    my_var3='mzMod1.modBias';
    my_var4='tx1.pwr';
    document.getElementById("my_delay_But").style.display="none";
    document.getElementById("my_delay").value=my_delay;
function graphData()
{
    this.x= [[]];
   
}

var graph01 = new graphData();
var graph02 = new graphData();
var graph03 = new graphData();
var graph04 = new graphData();


function GraphReset(item){
  switch(item)
    {
    case 0:
        clearGraphData(graph01,plot1);
    break;
    case 1:
        clearGraphData(graph02,plot2);
    break;
    case 2:
        clearGraphData(graph03,plot3);
    break;
    case 3:
        clearGraphData(graph04,plot4);
    break;
    }
}


function start(){
    plot1.replot();
    plot2.replot();
    plot3.replot();
    plot4.replot();
}

function setUpGraphData(graphData,ID)
{
    var Datum = new Date();
    
    //console.log("ID's: 1:"+ID1+" 2:"+ID2);
    var item = document.getElementById(ID);
   
    
    var wert=Math.round(Number(item.value) * 100) / 100;
    graphData.x = [[Datum, wert]];
   
}

function updateGraphData(graphData,ID,plot)
{
    var Datum = new Date();

    var item = document.getElementById(ID);
   
    
    if (graphData.x == "") {
        wert=Math.round(Number(item.value) * 100) / 100;
        graphData.x[0].push([Datum, wert]);
       
        return;
    }
    wert=Math.round(Number(item.value) * 100) / 100;
    graphData.x[0].push([Datum, wert]);
   
    
    plot.series[0].data = graphData.x[0];
    plot.resetAxesScale();
    plot.replot();
}

function clearGraphData(graphData,plot){

    graphData.x = [[]];
   
    
    plot.series[0].data = graphData.x[0];
   
    plot.resetAxesScale();
    //$('#chart1').empty(); 
    plot.redraw();
   
}

function createGraphs() {
    plot1 = $.jqplot('chart1', [graph01.x], {
        //title:'Channel 1',
        axes:{
           xaxis:{
                renderer:$.jqplot.DateAxisRenderer,
                rendererOptions:{
                    tickRenderer:$.jqplot.CanvasAxisTickRenderer
                },
                tickOptions:{
                    fontSize:'10pt',
                    fontFamily:'Tahoma',
                    angle:0
                }
            },
            yaxis:{
                rendererOptions:{
                    tickRenderer:$.jqplot.CanvasAxisTickRenderer},
                    tickOptions:{
                        fontSize:'10pt',
                        fontFamily:'Tahoma',
                        angle:0,
                       // formatString:'%.0e'
                    }
            }
        },
        
        series:[{ showLine:false, markerOptions:{ size:1,style:'square' }}],
        
        cursor:{
            zoom:true,
            looseZoom: true
        }
       
     
    });
    
    plot2 = $.jqplot('chart2', [graph02.x], {
        //title:'Channel 2',
        axes:{
            xaxis:{
                renderer:$.jqplot.DateAxisRenderer,
                rendererOptions:{
                    tickRenderer:$.jqplot.CanvasAxisTickRenderer
                },
                tickOptions:{
                    fontSize:'10pt',
                    fontFamily:'Tahoma',
                    angle:0
                }
            },
            yaxis:{
                rendererOptions:{
                    tickRenderer:$.jqplot.CanvasAxisTickRenderer},
                    tickOptions:{
                        fontSize:'10pt',
                        fontFamily:'Tahoma',
                        angle:0,
                       // formatString:'%.0e'
                    }
            }
        },
        series:[{ showLine:false, markerOptions:{ size:1,style:'square'}}],
        cursor:{
            zoom:true,
            looseZoom: true
        },
        tickInterval:null,
        numberTicks:null
    });

    
    plot3 = $.jqplot('chart3', [graph03.x], {
        //title:'Channel 3',
        axes:{
            xaxis:{
                renderer:$.jqplot.DateAxisRenderer,
                rendererOptions:{
                    tickRenderer:$.jqplot.CanvasAxisTickRenderer
                },
                tickOptions:{
                    fontSize:'10pt',
                    fontFamily:'Tahoma',
                    angle:0,
                  //  formatString:'%.0e'
                }
            },
            yaxis:{
                rendererOptions:{
                    tickRenderer:$.jqplot.CanvasAxisTickRenderer},
                    tickOptions:{
                        fontSize:'10pt',
                        fontFamily:'Tahoma',
                        angle:0,
                       // formatString:'%.0e'
                    }
            }
        },
        series:[{ showLine:false, markerOptions:{ size:1,style:'square'}}],
        cursor:{
            zoom:true,
            looseZoom: true
        }
    });
     
    plot4 = $.jqplot('chart4', [graph04 .x], {
       // title:'Channel 4',
        axes:{
            xaxis:{
                renderer:$.jqplot.DateAxisRenderer,
                rendererOptions:{
                    tickRenderer:$.jqplot.CanvasAxisTickRenderer
                },
                tickOptions:{
                    fontSize:'10pt',
                    fontFamily:'Tahoma',
                    angle:0
                }
            },
            yaxis:{
                rendererOptions:{
                    tickRenderer:$.jqplot.CanvasAxisTickRenderer},
                    tickOptions:{
                        fontSize:'10pt',
                        fontFamily:'Tahoma',
                        angle:0
                    }
            }
        },
        series:[{ showLine:false, markerOptions:{ size:1,style:'square' }}], //showMarker:false lineWidth:1
      
        cursor:{
            zoom:true,
            looseZoom: true
        }
    });

}



$(document).ready(function(){
    $.jqplot.config.enablePlugins = true;
    document.getElementById('var1').value=my_var1;
    document.getElementById('var2').value=my_var2;
    document.getElementById('var3').value=my_var3;
    document.getElementById('var4').value=my_var4;
    createGraphs();
    setUpGraphData(graph01,my_var1);
    setUpGraphData(graph02,my_var2);
    setUpGraphData(graph03,my_var3);
    setUpGraphData(graph04,my_var4);
    
    intervalId = setInterval(IntervalFunc, 1000);  

});
function IntervalFunc() {       
        updateGraphData(graph01,my_var1,plot1);
        updateGraphData(graph02,my_var2,plot2);
        updateGraphData(graph03,my_var3,plot3);
        updateGraphData(graph04,my_var4,plot4);
        window.parent.socket.send(JSON.stringify({get: my_var1}));
        window.parent.socket.send(JSON.stringify({get: my_var2}));
        window.parent.socket.send(JSON.stringify({get: my_var3}));
        window.parent.socket.send(JSON.stringify({get: my_var4}));
}
function GraphStop(){
   if(bStop){
    intervalId = setInterval(IntervalFunc, my_delay); 
    bStop=false;
    document.getElementById('StopBut').innerHTML = "Stop";
    }
    else {
	clearInterval(intervalId);
	bStop=true;
	document.getElementById('StopBut').innerHTML = "Start";
    }
    
}
function ChangeVar(k){
    switch(k)
     {
case 1:
   my_var1=document.getElementById('var1').value;
   GraphReset(0);
   break;
case 2:
   my_var2=document.getElementById('var2').value;
   GraphReset(1);
   break;
case 3:
   my_var3=document.getElementById('var3').value;
   GraphReset(2);
   break;
case 4:
   my_var4=document.getElementById('var4').value;
   GraphReset(3);
   break;
     }
}

//******************************************************
function validateImput(evt,Feld) {
	//the pressed key
	var theEvent = evt || window.event;
	var bkey = theEvent.keyCode || theEvent.which;
	key = String.fromCharCode( bkey );
	console.log("theEvent:"+theEvent+" key: "+bkey);
	
	//allow arrow keys
	if ( bkey == 39 || bkey == 37) return;
	
	//allow backspace and color save indicator red
	if (bkey == 8){
		makeSaveVisible(Feld);
		return;
	}
	
	var s=Feld.value;
	var regex = /[0-9]|-|./;
	if( !regex.test(key) || s.length>=10) {
		theEvent.returnValue = false;
		if(theEvent.preventDefault) theEvent.preventDefault();
		return;
	}
	
	makeSaveVisible(Feld);
}

function  makeSaveVisible(Feld){
	var but=(Feld.id+'_But');   
	clearInterval(intervalId);	
	document.getElementById(but).style.display='table-row';	
}

function TestDelay(item){

var myname=item.id;
myname=myname.substr(0,myname.length-4);
var elem=document.getElementById(myname);
var val=elem.value;

if (val>200) {	
my_delay=val;  //tx0.pwrRef_But   mzMod0.bias_But
document.getElementById("my_delay_But").style.display="none";
intervalId = setInterval(IntervalFunc, my_delay); 
}
else {
elem.value="";
}
}
-->
</script>


<!-- End example scripts -->

<!-- Don't touch this! -->


    <script class="include" type="text/javascript" src="../html/js/graph/jquery.jqplot.min.js"></script>
    <script type="text/javascript" src="../html/js/graph/shCore.min.js"></script>
    <script type="text/javascript" src="../html/js/graph/shBrushJScript.min.js"></script>
    <script type="text/javascript" src="../html/js/graph/shBrushXml.min.js"></script>
<!-- End Don't touch this! -->

<!-- Additional plugins go here -->

    <!-- to render rotated axis ticks, include both the canvasText and canvasAxisTick renderers -->
    <script language="javascript" type="text/javascript" src="../html/js/graph/jqplot.canvasTextRenderer.min.js"></script>
    <script language="javascript" type="text/javascript" src="../html/js/graph/jqplot.canvasAxisTickRenderer.min.js"></script>
    <script language="javascript" type="text/javascript" src="../html/js/graph/jqplot.dateAxisRenderer.min.js"></script>
    <script language="javascript" type="text/javascript" src="../html/js/graph/jqplot.cursor.min.js"></script>

<!-- End additional plugins -->


</html>

</script>
		

